<!DOCTYPE html> 
 <html lang="zh"> 
 <head> 
   <meta charset="UTF-8" /> 
   <title>BunnyEra AI — Chat</title> 
   <style> 
     body { 
       margin: 0; 
       font-family: Arial, sans-serif; 
       background: #f5f5f5; 
       display: flex; 
       flex-direction: column; 
       height: 100vh; 
     } 
 
     /* 顶部栏 */ 
     .header { 
       background: #111; 
       color: #fff; 
       padding: 14px 20px; 
       font-size: 18px; 
       font-weight: bold; 
     } 
 
     /* 聊天窗口 */ 
     .chat-container { 
       flex: 1; 
       overflow-y: auto; 
       padding: 20px; 
     } 
 
     .message { 
       max-width: 70%; 
       padding: 12px 16px; 
       margin-bottom: 12px; 
       border-radius: 10px; 
       line-height: 1.5; 
       white-space: pre-wrap; 
     } 
 
     .user { 
       background: #007bff; 
       color: white; 
       margin-left: auto; 
     } 
 
     .bot { 
       background: #eaeaea; 
       color: #333; 
       margin-right: auto; 
     } 
 
     /* 输入栏 */ 
     .input-area { 
       display: flex; 
       padding: 12px; 
       background: #fff; 
       border-top: 1px solid #ddd; 
     } 
 
     .input-area input { 
       flex: 1; 
       padding: 12px; 
       font-size: 16px; 
       border: 1px solid #ccc; 
       border-radius: 6px; 
     } 
 
     .input-area button { 
       margin-left: 10px; 
       padding: 12px 20px; 
       font-size: 16px; 
       background: #111; 
       color: white; 
       border: none; 
       border-radius: 6px; 
       cursor: pointer; 
     } 
 
     /* 模型选择器 */ 
     .model-select { 
       padding: 10px; 
       background: #fff; 
       border-bottom: 1px solid #ddd; 
     } 
 
     .model-select select { 
       padding: 8px; 
       font-size: 14px; 
       border-radius: 6px; 
       border: 1px solid #ccc; 
     } 
 
   </style> 
 </head> 
 
 <body> 
 
   <div class="header">BunnyEra AI — Web Chat</div> 
 
   <!-- 模型选择器 --> 
   <div class="model-select"> 
     <label>选择模型：</label> 
     <select id="modelSelect"></select> 
   </div> 
 
   <!-- 聊天窗口 --> 
   <div class="chat-container" id="chatContainer"></div> 
 
   <!-- 输入栏 --> 
   <div class="input-area"> 
     <input id="messageInput" placeholder="输入消息..." /> 
     <button onclick="sendMessage()">发送</button> 
   </div> 
 
   <script> 
     const API_BASE = "http://localhost:3001/api/chat"; 
 
     // 自动加载模型列表 
     async function loadModels() { 
       try {
         const res = await fetch(`${API_BASE}/models`); 
         const data = await res.json(); 
         
         const select = document.getElementById("modelSelect"); 
         // Clear existing options
         select.innerHTML = '';
         
         if (data.data && Array.isArray(data.data)) {
            data.data.forEach(model => { 
                const option = document.createElement("option"); 
                option.value = model.id; 
                option.textContent = model.name; 
                select.appendChild(option); 
            });
         }
       } catch (e) {
         console.error("Failed to load models:", e);
       }
     } 
 
     loadModels(); 
 
     // 发送消息 
     async function sendMessage() { 
       const input = document.getElementById("messageInput"); 
       const text = input.value.trim(); 
       if (!text) return; 
 
       const model = document.getElementById("modelSelect").value; 
 
       addMessage(text, "user"); 
       input.value = ""; 
 
       // 加载动画 
       const loadingId = addMessage("思考中...", "bot"); 
 
       try {
         const res = await fetch(API_BASE, { 
           method: "POST", 
           headers: { "Content-Type": "application/json" }, 
           body: JSON.stringify({ 
             message: text, 
             model: model, 
             history: [] 
           }) 
         }); 
   
         const data = await res.json(); 
   
         // 删除加载动画 
         removeMessage(loadingId); 
         
         if (data.data && data.data.content) {
            addMessage(data.data.content, "bot"); 
         } else {
            addMessage("Error: " + (data.message || "Unknown error"), "bot");
         }
       } catch (e) {
         removeMessage(loadingId);
         addMessage("Error: Network failure", "bot");
       }
     } 
 
     // 添加消息 
     function addMessage(text, role) { 
       const container = document.getElementById("chatContainer"); 
       const msg = document.createElement("div"); 
       msg.className = `message ${role}`; 
       msg.textContent = text; 
 
       const id = "msg_" + Date.now(); 
       msg.id = id; 
 
       container.appendChild(msg); 
       container.scrollTop = container.scrollHeight; 
 
       return id; 
     } 
 
     // 删除消息 
     function removeMessage(id) { 
       const msg = document.getElementById(id); 
       if (msg) msg.remove(); 
     } 
   </script> 
 
 </body> 
 </html>